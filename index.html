<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ENG0018 Computer Laboratory 2025/26</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>
    <!-- Banner (must be inside body) -->
    <img id="banner" src="WebBanner2023.png" alt="Banner" width="900" height="200">
    <div id="banner-diagnostic" style="text-align:center;color:#900;display:none;"></div>

    <h1><b>ENG0018 Computer Laboratory 2025/26</b></h1>
    <h2>Student URN: 6924986</h2>
    <hr>
    <h2 style="font-family: Calibri;"><b>Conference paper: The Mortality Of Surgical Robots</b></h2>
    <hr>

        <!-- Fixed sliding sidebar TOC -->
        <button id="toc-open" class="toc-open-btn" aria-controls="toc-sidebar" aria-expanded="false">☰ Contents</button>
    <!-- Backdrop for sidebar -->
    <div id="toc-backdrop" class="toc-backdrop" aria-hidden="true"></div>
    <aside id="toc-sidebar" class="toc-sidebar" aria-hidden="true" role="navigation">
            <button id="toc-close" class="toc-close-btn" aria-label="Close contents">×</button>
            <nav>
                <ul>
                    <li><a href="#abstract">Abstract</a></li>
                    <li><a href="#introduction">Introduction</a></li>
                    <li><a href="#literature-review">Literature Review</a></li>
                    <li><a href="#site-description">Site Description / Case Study</a></li>
                    <li><a href="#materials-methods">Materials & Methods</a></li>
                    <li><a href="#results">Results</a></li>
                    <li><a href="#analysis-discussion">Analysis & Discussion</a></li>
                    <li><a href="#design-recommendations">Design Recommendations</a></li>
                    <li><a href="#cost-benefit">Cost-Benefit</a></li>
                    <li><a href="#conclusions">Conclusions</a></li>
                    <li><a href="#references">References</a></li>
                    <li><a href="#appendices">Appendices</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Placeholder sections for TOC targets (you can replace these with your content) -->
        <main>
            <section id="abstract"><h2>Abstract</h2><p>Placeholder — concise summary of the paper (150–250 words). Replace this with your abstract.</p></section>
            <section id="introduction"><h2>Introduction</h2><p>Sugical robots are etc.</p></section>
            <section id="literature-review"><h2>Literature Review</h2><p>Placeholder — summary of related work and methods (500–800 words).</p></section>
            <section id="site-description"><h2>Site Description / Case Study</h2><p>Placeholder — description of the site and observed damage (300–600 words).</p></section>
            <section id="materials-methods"><h2>Materials & Methods</h2><p>Placeholder — materials, testing and repair procedure (500–800 words).</p></section>
            <section id="results"><h2>Results</h2><p>Placeholder — experimental/field results and tables/figures (600–1000 words).</p></section>
            <section id="analysis-discussion"><h2>Analysis & Discussion</h2><p>Placeholder — interpretation and comparison to literature (600–1000 words).</p></section>
            <section id="design-recommendations"><h2>Design Recommendations</h2><p>Placeholder — practical guidance and checklist (300–500 words).</p></section>
            <section id="cost-benefit"><h2>Cost-Benefit & Life-Cycle</h2><p>Placeholder — cost estimates and life-cycle considerations (300–600 words).</p></section>
            <section id="conclusions"><h2>Conclusions</h2><p>Placeholder — key takeaways and future work (150–300 words).</p></section>
            <section id="references"><h2>References</h2><p>Placeholder — add your references here.</p></section>
            <section id="appendices"><h2>Appendices</h2><p>Placeholder — raw data, extended tables, etc.</p></section>
        </main>
           <!-- //////////////////////////////////////////////////////////////////////////////// -->
  <!-- ////////////////////////////// Adding last update ////////////////////////////// -->
  <!-- //////////////////////////////////////////////////////////////////////////////// -->
    <!-- Last commit time display -->
<div id="last-updated">Loading last update time...</div>
<!-- Verify Button -->
<button id="verifyBtn" style="display: block; margin: 10px auto; padding: 8px 16px;">Verify Last Modified Time</button>

<script>
    // GitHub configuration (unauthenticated requests are rate-limited and may be blocked by CORS when opened via file://)
    const GITHUB_USERNAME = 'nr0025';
    const GITHUB_REPO = 'FY0025';

    async function getLastUpdatedTime() {
        const url = `https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/commits`;
        try {
            const response = await fetch(url, { headers: { 'Accept': 'application/vnd.github.v3+json' } });
            if (!response.ok) throw new Error(`Error fetching data: ${response.status} - ${response.statusText}`);
            const commits = await response.json();
            if (Array.isArray(commits) && commits.length > 0) {
                const lastCommitDate = new Date(commits[0].commit.committer.date);
                document.getElementById('last-updated').innerText = `Last Modified Time: ${lastCommitDate.toLocaleString()}`;
                return true;
            }
            document.getElementById('last-updated').innerText = 'No commits found in the repository.';
            return false;
        } catch (err) {
            console.error('Error fetching last updated time:', err);
            document.getElementById('last-updated').innerText = 'Error fetching update time. Check console for details.';
            return false;
        }
    }

    async function verifyLastUpdatedTime() {
        document.getElementById('last-updated').innerText = 'Verifying...';
        const ok = await getLastUpdatedTime();
        if (ok) alert('Last modified time has been successfully verified from GitHub API.');
        else alert('Verification failed. See message above.');
    }

    // Image diagnostic helper: shows a message if banner fails to load
    function attachBannerDiagnostics() {
        const banner = document.getElementById('banner');
        if (!banner) return;
        let diag = document.getElementById('banner-diagnostic');
        if (!diag) {
            diag = document.createElement('div');
            diag.id = 'banner-diagnostic';
            diag.style.textAlign = 'center';
            diag.style.color = '#900';
            banner.insertAdjacentElement('afterend', diag);
        }

        function showDiagnostic(message) {
            diag.textContent = message;
            diag.style.display = 'block';
        }

        banner.addEventListener('load', function() {
            diag.style.display = 'none';
        });
        banner.addEventListener('error', function() {
            showDiagnostic('Banner image failed to load. Ensure "WebBanner2023.png" is in the same folder as this HTML file and the filename is correct.');
        });

        // If the image has already attempted to load (cached), check its naturalWidth
        if (banner.complete && banner.naturalWidth === 0) {
            showDiagnostic('Banner image failed to load (cached). Check file location/permissions.');
        }
    }

    // Word count helpers (defensive)
    function countWordsInElement(id) {
        const el = document.getElementById(id);
        if (!el) return 0;
        const text = el.textContent || '';
        if (!text.trim()) return 0;
        return text.trim().split(/\s+/).filter(Boolean).length;
    }

    function displayTotalWordCount() {
        const introductionCount = countWordsInElement('Introduction_InText');
        const analysisCount = countWordsInElement('Analysis_InText');
        const total = introductionCount + analysisCount;
        const out = document.getElementById('totalWordCount');
        if (out) out.innerText = `Total word count: ${total}`;
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Attach verify button
        const btn = document.getElementById('verifyBtn');
        if (btn) btn.addEventListener('click', verifyLastUpdatedTime);

        // Run initial tasks
        getLastUpdatedTime();
        displayTotalWordCount();
        attachBannerDiagnostics();
    });
</script>

<!-- TOC toggle behavior -->



 <!-- //////////////////////////////////////////////////////////////////////////////// -->
  <!-- ////////////////////////////// Word count function ////////////////////////////// -->
  <!-- //////////////////////////////////////////////////////////////////////////////// -->
<!-- Placeholder for total word count -->
<p id="totalWordCount"></p>
<hr>
<!-- Sidebar behavior and smooth scrolling -->
<script>
    (function(){
        const openBtn = document.getElementById('toc-open');
        const closeBtn = document.getElementById('toc-close');
        const sidebar = document.getElementById('toc-sidebar');
        if (!openBtn || !sidebar) return;

        const backdrop = document.getElementById('toc-backdrop');
        function openSidebar() {
            // compute sidebar width so the button can move exactly the same distance
            const rect = sidebar.getBoundingClientRect();
            const offset = Math.round(rect.width);
            // apply transform to button to move with sidebar (to the left)
            openBtn.style.transition = 'transform 280ms ease';
            openBtn.style.transform = `translateX(-${offset}px)`;

            sidebar.classList.add('open');
            if (backdrop) backdrop.classList.add('open');
            sidebar.setAttribute('aria-hidden','false');
            if (backdrop) backdrop.setAttribute('aria-hidden','false');
            openBtn.setAttribute('aria-expanded','true');
        }
        function closeSidebar() {
            // reset button transform
            openBtn.style.transform = '';
            sidebar.classList.remove('open');
            if (backdrop) backdrop.classList.remove('open');
            sidebar.setAttribute('aria-hidden','true');
            if (backdrop) backdrop.setAttribute('aria-hidden','true');
            openBtn.setAttribute('aria-expanded','false');
        }

        openBtn.addEventListener('click', function(e){ openSidebar(); e.stopPropagation(); });
    if (closeBtn) closeBtn.addEventListener('click', function(e){ closeSidebar(); e.stopPropagation(); });
    if (backdrop) backdrop.addEventListener('click', function(){ closeSidebar(); });

    // Close when clicking outside (fallback)
    document.addEventListener('click', function(e){ if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && e.target !== openBtn) closeSidebar(); });
        // Close on Escape
        document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeSidebar(); });

        // Smooth scroll for TOC links — delegated handling so clicks always close the sidebar
        sidebar.addEventListener('click', function(e) {
            const a = e.target.closest('a[href^="#"]');
            if (!a) return;
            const href = a.getAttribute('href');
            if (!href || href.charAt(0) !== '#') return;
            const targetId = href.slice(1);
            const target = document.getElementById(targetId);
            if (target) {
                e.preventDefault();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            // Close sidebar in any case
            closeSidebar();
        });
    })();
</script>

</html>
